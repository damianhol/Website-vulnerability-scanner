console.log('Client.js loaded');

document.getElementById('scan-form').addEventListener('submit', async (event) => {
  event.preventDefault(); // Prevent the default form submission behavior

  const url = document.getElementById('url').value;
  const response = await fetch('http://localhost:3000/scan', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ url }),
  });

  const results = await response.json();
  console.log(results);
  // Redirect to the results page with the results as a URL parameter
  window.location.href = `/results?data=${encodeURIComponent(JSON.stringify(results))}`;
});
